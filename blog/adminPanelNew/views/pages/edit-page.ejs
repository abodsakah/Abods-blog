<%- include("../addons/head"), {title:title} %> 
<%- include("../addons/nav") %> 

<!-- Main area -->
<br>
<br>
<form method="post">
<div class="uk-flex uk-flex-wrap uk-flex-wrap-around" style="margin-left: 16% !important;">
    <div style="margin-left: 1%!important;" class="uk-width-1-2">
        <legend class="uk-legend">Edit post</legend>
        <h2>Title</h2>
        <div class="uk-margin">
            <input class="uk-input" type="text" placeholder="Input" value="<%= page.title %> " name="title">
        </div>
        <h2>Main body</h2>
        <textarea id="bodyContent" name="bodyContent" style="height: 800px;">
            <%= page.content %> 
        </textarea>
    </div>
    <div style="margin-left: 5%!important;" class="uk-width-1-3 uk-margin-left">
        <div style="margin-top: 10%;"class="uk-card uk-card-default uk-card-body">
            <h3 class="uk-card-title">Actions</h3>
            <br>
            <br>
            <button class="uk-button uk-button-primary"> <span class="uk-margin-small-right" uk-icon="check"></span>
                Update</button>
        </div>
        <h2>Prema link</h2>
        <div class="uk-margin">
            <input class="uk-input" type="text" onchange="sanitzeLinkInput()" id="linkInput" placeholder="the-link-to-page" value="<%= page.premalink %> " name="premaLink">
        </div>
        <h2>Header image link</h2>
        <div class="uk-margin">
            <input class="uk-input" type="text" onload="sanitzeSpaces()" id="headerImage" placeholder="https://domain.com/image" value="<%= page.image %> " name="headerImage">
        </div>
        <br>
        <div>
            <div class="">
                <h2 class="">Status</h2>

                <select class="uk-select" name="status">
                    <% if(page.status === 1) {%>
                        <option value="1" selected>Public</option>
                        <option value="2">Draft</option>
                        <option value="3">Private</option>
                    <% } else if(page.status === 2) {%>
                        <option value="1">Public</option>
                        <option value="2" selected>Draft</option>
                        <option value="3">Private</option>
                    <% } else {%>
                        <option value="1">Public</option>
                        <option value="2">Draft</option>
                        <option value="3" selected>Private</option>
                    <% } %>
                </select>
            </div>
        </div>
    </div>
</div>
</form>

<!-- Initialize Quill editor -->
<script src='https://cdn.tiny.cloud/1/s6hsy5kv7b8q35vpwwux25j3xuxargmohkpjopuikjp4vehf/tinymce/5/tinymce.min.js' referrerpolicy="origin">
</script>
<script>
  tinymce.init({
    selector: '#bodyContent',
    //directionality
    plugins: 'codesample image   lists anchor anchor autolink code charmap advlist emoticons    link media preview toc wordcount',
    toolbar: 'undo redo styleselect bold italic alignleft aligncenter alignright alignjustify ltr rtl | bullist  numlist outdent indent link charmap| codesample image imagetools emoticons media | toc | preview wordcount code',
    toolbar_mode: 'sliding',
    convert_newlines_to_brs : true,
    force_br_newlines : true,
    force_p_newlines : true,
    forced_root_block : false,
});

  function sanitzeLinkInput() {
    var link = document.getElementById("linkInput").value;
    //check if it has any spaces
    if (link.indexOf(" ") > -1) {
        document.getElementById("linkInput").value = link.replace(/ /g, "-");

    }
  }
var imageInput = document.getElementById("headerImage");
var link = document.getElementById("linkInput");
link.value = link.value.trim();
imageInput.value = imageInput.value.trim();
</script>

<%- include("../addons/footer") %> 